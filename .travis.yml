language: python
cache: pip
sudo: false

python:
  - 3.5
  - 3.6
  - 3.7

install:
  - |
    if [[ "${TRAVIS_PYTHON_VERSION}" == "3.6" ]]; then
      pip install codecov
      pip install coverage
    fi
  - pip install -r requirements.txt
  - pip install -r requirements-dev.txt

script:
  - ./ci/lint.sh
  - |
    if [[ "${TRAVIS_PYTHON_VERSION}" == "3.6" ]]; then
      coverage run setup.py test
    else
      python setup.py test
    fi

after_success:
  - |
    if [[ "${TRAVIS_PYTHON_VERSION}" == "3.6" ]]; then
      codecov
    fi
